<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Streams</title>
    <style>
        .video-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        .video {
            margin: 10px;
            width: 320px;
            height: 180px;
        }
    </style>
</head>
<body>

<h1>Past YouTube Live Streams</h1>
<div id="video-list" class="video-container">
    <!-- Videos will be embedded here -->
</div>

<script>
    // URL of your Cloud Function (replace with your actual function URL)
    const functionUrl = 'https://us-east1-embed-youtube-livestream-app.cloudfunctions.net/fetchPastLiveStreams';

    // Fetch video data from the Cloud Function
    fetch(functionUrl)
        .then(response => response.json())
        .then(videos => {
            const videoList = document.getElementById('video-list');
            videoList.innerHTML = '';  // Clear any existing content

            // Loop through the fetched videos and create iframe elements
            videos.forEach(video => {
                const videoId = video.id.videoId; // YouTube video ID
                const videoTitle = video.snippet.title; // Video title

                // Create iframe for embedding YouTube video
                const iframe = document.createElement('iframe');
                iframe.width = '320';
                iframe.height = '180';
                iframe.src = `https://www.youtube.com/embed/${videoId}`;
                iframe.title = videoTitle;
                iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
                iframe.allowFullscreen = true;
                iframe.className = 'video';

                // Append iframe to the video container
                videoList.appendChild(iframe);
            });
        })
        .catch(error => {
            console.error('Error fetching video data:', error);
            const videoList = document.getElementById('video-list');
            videoList.innerHTML = '<p>Error loading videos.</p>';
        });
</script>

</body>
</html>
